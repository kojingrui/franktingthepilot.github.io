<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼ å¥‡æœºé•¿ Frank Ting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a202c;
            color: white;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .pixel-font {
            font-family: 'Press Start 2P', cursive;
        }

        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .plane-anim {
            animation: fly 2s infinite ease-in-out;
        }

        @keyframes fly {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Scanline effect */
        .scanlines {
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            position: fixed;
            pointer-events: none;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 10;
        }

        .bar-container {
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <div class="scanlines"></div>

    <!-- Main Game Container -->
    <div id="game-container" class="w-full max-w-md bg-gray-800 rounded-xl border-4 border-gray-600 shadow-2xl overflow-hidden relative">
        
        <!-- Header / Distance -->
        <div class="bg-gray-900 p-4 border-b-4 border-gray-700 text-center">
            <h1 class="text-xl font-bold text-yellow-400 mb-2">FRANK TING</h1>
            <!-- ä¿®æ”¹ï¼šè·ç¦»æ˜¾ç¤ºå­—ä½“ä¸ºç™½è‰² (text-white) -->
            <div class="bg-black p-2 rounded border border-gray-600 font-mono text-white text-2xl">
                <span id="distance-display">0</span> km
            </div>
            <div class="text-xs text-gray-400 mt-1">ç›®æ ‡: 50,000 km</div>
        </div>

        <!-- Visual Scene -->
        <div class="relative h-64 bg-sky-300 overflow-hidden flex items-center justify-center group">
            <!-- Background Clouds -->
            <!-- ä¿®å¤ï¼šå»æ‰äº† transition-all duration-1000ï¼Œé˜²æ­¢ä¸ JS åŠ¨ç”»å†²çªï¼›å»æ‰äº† bg-cover æ”¹ä¸º background-size: auto 100% ä»¥ä¾¿æ›´å¥½åœ°å¹³é“º -->
            <div id="bg-sky" class="absolute inset-0 transition-opacity duration-200" style="background-image: url('https://img.freepik.com/free-vector/blue-sky-with-clouds-background_1017-26303.jpg'); opacity: 0.8; background-repeat: repeat-x; background-size: auto 100%;"></div>
            
            <!-- Frank's Avatar -->
            <div class="relative z-10 w-40 h-40 group cursor-pointer" onclick="document.getElementById('img-upload').click()">
                <div id="frank-wrapper" class="w-full h-full rounded-full border-4 border-white shadow-lg overflow-hidden relative bg-gray-500 plane-anim group-hover:border-yellow-400 transition-colors">
                    <!-- ä½¿ç”¨ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ -->
                    <img id="frank-img" src="frank.jpg" alt="Frank Ting" class="w-full h-full object-cover" onerror="handleImgError(this)">
                    
                    <!-- Upload Hint Overlay -->
                    <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <i class="fas fa-camera text-white text-2xl"></i>
                    </div>
                </div>
                <!-- Plane Wings (CSS Art) -->
                <div class="absolute top-1/2 -left-10 w-16 h-4 bg-gray-300 rotate-12 -z-10 rounded-l border border-gray-600"></div>
                <div class="absolute top-1/2 -right-10 w-16 h-4 bg-gray-300 -rotate-12 -z-10 rounded-r border border-gray-600"></div>
            </div>
            
            <!-- Hidden File Input -->
            <input type="file" id="img-upload" accept="image/*" class="hidden" onchange="uploadImage(this)">

            <!-- Effect Overlays -->
            <div id="effect-flash" class="absolute inset-0 bg-red-500 opacity-0 pointer-events-none transition-opacity duration-200"></div>
        </div>

        <!-- Stats Panel -->
        <div class="p-4 space-y-3 bg-gray-800">
            
            <!-- Stamina (Fuel/Fatigue) - æ”¹ä¸ºç™½è‰² -->
            <div>
                <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-1">
                    <span>é£è¡Œè€åŠ› (Max: <span id="max-stamina-display">100</span>%)</span>
                    <i class="fas fa-bolt text-white"></i>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-4 border border-gray-600">
                    <div id="bar-stamina" class="bar-container bg-white h-full rounded-full" style="width: 100%"></div>
                </div>
                <p class="text-[10px] text-gray-400 mt-0.5">é£å¤ªé¢‘ç¹ä¼šé™ä½ä¸Šé™!</p>
            </div>

            <!-- Mental Health - ä¿®æ”¹ä¸ºé»„è‰² -->
            <div>
                <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-1">
                    <span>å¿ƒç†å¥åº· (Sanity)</span>
                    <i class="fas fa-brain text-yellow-400"></i>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-4 border border-gray-600">
                    <div id="bar-mental" class="bar-container bg-yellow-400 h-full rounded-full" style="width: 100%"></div>
                </div>
                <p class="text-[10px] text-gray-400 mt-0.5">ä¸é£å°±ä¼šæŠ‘éƒ!</p>
            </div>

            <!-- Physical Health - (ä¿æŒä¸ºåŸæ¥çš„é»„è‰²/æˆ–æ ¹æ®ä¹‹å‰ç‰ˆæœ¬æ˜¯çº¢è‰²ï¼Œæ­¤å¤„ä¸ºäº†ä¸å†²çªï¼Œæˆ‘å°†å…¶è®¾ä¸ºçº¢è‰²ï¼Œä»¥åŒºåˆ†å¿ƒç†å¥åº·) -->
            <!-- ä¿®æ­£ï¼šä¸ºäº†é¿å…ä¸¤ä¸ªé»„è‰²æ¡åˆ†ä¸æ¸…ï¼Œæˆ‘å°†èº«ä½“å¥åº·æ”¹å›ç»å…¸çš„çº¢è‰²ï¼Œå¿ƒç†å¥åº·ä½¿ç”¨ä½ è¦æ±‚çš„é»„è‰² -->
            <div>
                <div class="flex justify-between text-xs font-bold uppercase tracking-wider mb-1">
                    <span>èº«ä½“å¥åº· (Health)</span>
                    <i class="fas fa-heart text-red-500"></i>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-4 border border-gray-600">
                    <div id="bar-health" class="bar-container bg-red-500 h-full rounded-full" style="width: 100%"></div>
                </div>
            </div>

        </div>

        <!-- Controls -->
        <div class="p-4 grid grid-cols-3 gap-2 bg-gray-900 border-t border-gray-700">
            <button id="btn-rest" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-2 rounded border-b-4 border-green-800 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center">
                <i class="fas fa-bed mb-1"></i>
                <span class="text-xs">ä¼‘æ¯/åœæœº</span>
            </button>

            <button id="btn-fly" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-2 rounded border-b-4 border-blue-800 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center">
                <i class="fas fa-plane-departure mb-1"></i>
                <span class="text-xs">èµ·é£!</span>
            </button>

            <!-- ä¿®æ”¹ï¼šæŒ‰é’®æ”¹ä¸ºâ€œä¼Ÿå“¥â€ -->
            <button id="btn-pill" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-2 rounded border-b-4 border-indigo-800 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center">
                <i class="fas fa-capsules mb-1"></i>
                <span class="text-xs">ä¼Ÿå“¥</span>
            </button>
        </div>

        <!-- Message Log -->
        <div id="message-log" class="bg-black text-green-400 font-mono text-xs p-2 h-16 overflow-y-auto border-t border-gray-700">
            > ç³»ç»Ÿå¯åŠ¨...<br>
            > æç¤º: å¦‚æœæ²¡çœ‹åˆ°æœ¬äººç…§ç‰‡ï¼Œè¯·æŠŠ frank.jpg æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ï¼Œæˆ–è€…ç›´æ¥ç‚¹å‡»å¤´åƒä¸Šä¼ ã€‚<br>
            > æ¬¢è¿å›æ¥, Frank Tingæœºé•¿.
        </div>

    </div>

    <!-- Ending Modal -->
    <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4">
        <div class="bg-gray-800 border-4 border-white p-6 rounded-lg text-center max-w-sm w-full">
            <h2 id="modal-title" class="text-2xl font-bold mb-4 pixel-font text-red-500">GAME OVER</h2>
            <div id="modal-img" class="text-6xl mb-4">ğŸ’€</div>
            <p id="modal-desc" class="text-gray-300 mb-6 font-mono text-sm">ç»“å±€æè¿°åœ¨è¿™é‡Œã€‚</p>
            <button onclick="location.reload()" class="w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-3 rounded pixel-font animate-pulse">
                å†é£ä¸€æ¬¡
            </button>
        </div>
    </div>

    <script>
        // Game State
        const state = {
            distance: 0,
            goal: 50000,
            
            // æ ¸å¿ƒæ•°å€¼
            stamina: 100,      // å½“å‰ä½“åŠ›
            maxStamina: 100,   // å½“å‰ï¼ˆå¯èƒ½æ˜¯è¯æ•ˆåçš„ï¼‰æœ€å¤§ä½“åŠ›ä¸Šé™
            
            // æ–°å¢ï¼šçœŸå®çš„èº«ä½“ä¸Šé™ï¼ˆç”¨äºè®°å½•ç£¨æŸï¼‰
            realMaxStamina: 100, 
            isBoosted: false,  // æ˜¯å¦åƒäº†ä¼Ÿå“¥
            
            mental: 100, // Sanity
            health: 100, // Physical
            
            isFlying: false,
            speed: 100,
            bgOffset: 0, 
            
            timer: null,
            gameOver: false
        };

        // DOM Elements
        const els = {
            dist: document.getElementById('distance-display'),
            maxStam: document.getElementById('max-stamina-display'),
            barStam: document.getElementById('bar-stamina'),
            barMental: document.getElementById('bar-mental'),
            barHealth: document.getElementById('bar-health'),
            log: document.getElementById('message-log'),
            frank: document.getElementById('frank-wrapper'),
            // Removed overlay element reference
            flash: document.getElementById('effect-flash'),
            bg: document.getElementById('bg-sky'),
            
            btnFly: document.getElementById('btn-fly'),
            btnRest: document.getElementById('btn-rest'),
            btnPill: document.getElementById('btn-pill'),
            
            modal: document.getElementById('modal'),
            mTitle: document.getElementById('modal-title'),
            mDesc: document.getElementById('modal-desc'),
            mImg: document.getElementById('modal-img')
        };

        // Helper: Log Message
        function log(msg) {
            els.log.innerHTML += `> ${msg}<br>`;
            els.log.scrollTop = els.log.scrollHeight;
        }

        // Helper: Flash Screen
        function flashColor(colorClass) {
            els.flash.className = `absolute inset-0 ${colorClass} opacity-50 pointer-events-none transition-opacity duration-200`;
            setTimeout(() => {
                els.flash.classList.remove('opacity-50');
                els.flash.classList.add('opacity-0');
            }, 100);
        }

        // Image Handling
        function handleImgError(img) {
            // Fallback if local file not found
            img.src = 'https://api.dicebear.com/7.x/avataaars/svg?seed=Frank';
            img.onerror = null; // Prevent infinite loop
            log("æœªæ£€æµ‹åˆ°æœ¬åœ° frank.jpgï¼Œå·²ä½¿ç”¨æ›¿èº«ã€‚(ç‚¹å‡»å¤´åƒå¯æ‰‹åŠ¨ä¸Šä¼ )");
        }

        function uploadImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('frank-img').src = e.target.result;
                    log("å¤´åƒæ›´æ–°æˆåŠŸï¼Frank çœ‹èµ·æ¥å¾ˆç²¾ç¥ã€‚");
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Game Loop (Runs every 100ms)
        function gameLoop() {
            if (state.gameOver) return;

            // 1. Logic if Flying
            if (state.isFlying) {
                // Increase Distance
                state.distance += (state.speed / 10); // Speed factor
                
                // Drain Stamina
                state.stamina -= 0.8; 

                // Improve Mental Health slightly (doing what he loves)
                if (state.mental < 100) state.mental += 0.2;

                // Random Crash Chance (0.1% per tick)
                if (Math.random() < 0.001) {
                    endGame('crash');
                    return;
                }

                els.frank.classList.add('shake');
                // Removed emoji update
                
                // ä¿®å¤ï¼šä½¿ç”¨ç´¯åŠ çš„åç§»é‡æ¥å®ç°å¹³æ»‘æ»šåŠ¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ Date.now()
                // å‘å·¦ç§»åŠ¨èƒŒæ™¯ (å‡å° x å€¼) æ¨¡æ‹Ÿå‘å‰é£è¡Œ
                // ä¿®æ”¹ï¼šè¿›ä¸€æ­¥åŠ é€ŸèƒŒæ™¯ç§»åŠ¨ (åŸä¸º speed / 1.5ï¼Œç°æ”¹ä¸º speed * 5 çº¦ç­‰äº10å€å¢é€Ÿ)
                state.bgOffset -= (state.speed * 5); 
                els.bg.style.backgroundPosition = `${state.bgOffset}px 0`;

                // Check if stamina runs out
                if (state.stamina <= 0) {
                    log("ç‡ƒæ²¹è€—å°½! ç´§æ€¥è¿«é™!");
                    stopFlying();
                }

            } else {
                // Logic if Resting/Grounded
                els.frank.classList.remove('shake');
                
                // Regenerate Stamina
                if (state.stamina < state.maxStamina) {
                    state.stamina += 0.5;
                } else {
                    state.stamina = state.maxStamina; // Cap it
                }

                // Decay Mental Health (Depression kicks in)
                state.mental -= 0.3;
                
                // Removed emoji updates for mental health
            }

            // 2. Win/Loss Checks
            
            // Win
            if (state.distance >= state.goal) {
                endGame('win');
                return;
            }

            // Lose: Depression/Crime
            if (state.mental <= 0) {
                endGame('crime');
                return;
            }

            // Lose: Physical Health
            if (state.health <= 0) {
                endGame('hospital');
                return;
            }
            
            // Lose: Can't fly anymore (Max Stamina too low to take off safely, e.g., < 20)
            if (state.realMaxStamina < 20 && !state.isFlying) {
                // æ³¨æ„ï¼šè¿™é‡Œæ£€æŸ¥çš„æ˜¯ realMaxStaminaï¼Œå› ä¸ºè¯æ•ˆè¿‡åæ‰ä¼šå‘ç°é£ä¸èµ·æ¥
                if (!state.isBoosted) {
                    endGame('grounded');
                    return;
                }
            }

            updateUI();
        }

        function updateUI() {
            els.dist.textContent = Math.floor(state.distance).toLocaleString();
            
            // æ˜¾ç¤ºå½“å‰ç”Ÿæ•ˆçš„ Max Stamina
            els.maxStam.textContent = Math.floor(state.maxStamina);
            
            // è¿›åº¦æ¡ç™¾åˆ†æ¯”
            els.barStam.style.width = `${Math.max(0, (state.stamina / state.maxStamina) * 100)}%`;
            
            // Stamina turns red if low, otherwise WHITE
            // å¦‚æœåƒäº†è¯ï¼Œè¿›åº¦æ¡å˜æˆç´«è‰²æˆ–è€…ç‰¹åˆ«çš„é¢œè‰²ï¼Ÿè¿™é‡Œä¿æŒç™½è‰²ï¼Œä½†å¦‚æœä½äº†è¿˜æ˜¯çº¢
            els.barStam.className = `bar-container h-full rounded-full ${state.stamina < 20 ? 'bg-red-500 animate-pulse' : 'bg-white'}`;
            
            els.barMental.style.width = `${Math.max(0, state.mental)}%`;
            els.barHealth.style.width = `${Math.max(0, state.health)}%`;

            // Button states
            els.btnFly.disabled = state.isFlying;
            els.btnFly.className = state.isFlying ? "opacity-50 cursor-not-allowed bg-gray-600 text-white font-bold py-3 px-2 rounded flex flex-col items-center" : "bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-2 rounded border-b-4 border-blue-800 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center";
            
            els.btnRest.disabled = !state.isFlying;
            els.btnRest.className = !state.isFlying ? "opacity-50 cursor-not-allowed bg-gray-600 text-white font-bold py-3 px-2 rounded flex flex-col items-center" : "bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-2 rounded border-b-4 border-green-800 active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center";
        }

        // Actions
        function startFlying() {
            if (state.stamina < 10) {
                log("è€åŠ›ä¸è¶³ï¼Œæ— æ³•èµ·é£ï¼å…ˆä¼‘æ¯ï¼");
                flashColor('bg-red-500');
                return;
            }
            if (state.maxStamina < 20) {
                log("æœºä½“/èº«ä½“å·²è¾¾æé™ï¼Œæ— æ³•å†é£äº†...");
                return;
            }
            
            state.isFlying = true;
            log("Frank æœºé•¿èµ·é£äº†!");
        }

        function stopFlying() {
            if (!state.isFlying) return;
            state.isFlying = false;
            
            // æ¯æ¬¡é™è½éƒ½ä¼šå¯¹ã€çœŸå®èº«ä½“ã€‘é€ æˆç£¨æŸ
            let damage = 5; 
            state.realMaxStamina -= damage;
            
            // æ— è®ºæ˜¯å¦åƒè¯ï¼ŒçœŸå®èº«ä½“éƒ½åœ¨å˜å·®
            // å¦‚æœåƒäº†è¯ï¼Œè¯æ•ˆåœ¨è¿™é‡Œç»“æŸï¼Œå›å½’çœŸå®èº«ä½“çŠ¶å†µ
            if (state.isBoosted) {
                state.isBoosted = false;
                // è¿˜åŸä¸ºçœŸå®çš„ï¼ˆå·²ç»ç£¨æŸçš„ï¼‰ä¸Šé™
                state.maxStamina = state.realMaxStamina;
                log(`é™è½æˆåŠŸã€‚è¯æ•ˆæ¶ˆé€€ï¼Œèº«ä½“æ„Ÿåˆ°ä¸€é˜µè™šç©º... (çœŸå®ä¸Šé™é™è‡³ ${state.realMaxStamina})`);
            } else {
                // å¦‚æœæ²¡åƒè¯ï¼Œæ˜¾ç¤ºä¸Šé™å°±æ˜¯çœŸå®ä¸Šé™
                state.maxStamina = state.realMaxStamina;
                log(`é™è½æˆåŠŸã€‚æœ€å¤§è€åŠ›æ°¸ä¹…é™ä½äº† ${damage} ç‚¹ã€‚`);
            }
            
            if (state.realMaxStamina < 20) {
                log("è­¦å‘Šï¼šèº«ä½“çŠ¶å†µæå·®ï¼Œå¯èƒ½æ— æ³•å†æ¬¡èµ·é£ã€‚");
            }
        }

        function takePill() {
            if (state.health <= 0) return;
            
            flashColor('bg-blue-500');
            
            // å¼€å¯è¯æ•ˆæ¨¡å¼
            state.isBoosted = true;
            
            // æ ¸å¿ƒä¿®æ”¹ï¼šä½“åŠ›ä¸Šé™ä¸´æ—¶å˜ä¸º100ï¼Œå½“å‰ä½“åŠ›ä¹Ÿç›´æ¥è¡¥æ»¡
            state.maxStamina = 100;
            state.stamina = 100;
            
            // Cost: Health drops significantly
            state.health -= 25;
            
            // ä¿®æ”¹æ—¥å¿—æ–‡æ¡ˆ
            log("åä¸‹äº†ä¼Ÿå“¥... æ„Ÿè§‰å……æ»¡äº†åŠ›é‡ï¼(ä½“åŠ›ä¸´æ—¶å›æ»¡ï¼Œå¥åº· -25)");
            // Removed emoji update

            // è¿™é‡Œçš„è¯æ•ˆç°åœ¨æŒç»­åˆ°é™è½ä¸ºæ­¢ï¼Œä¸éœ€è¦å®šæ—¶å™¨é‡ç½®é€Ÿåº¦äº†
        }

        // End Game Logic
        function endGame(reason) {
            state.gameOver = true;
            clearInterval(state.timer);
            els.modal.classList.remove('hidden');

            switch(reason) {
                case 'grounded':
                    // Bad Ending 1: Stuck
                    els.mTitle.textContent = "ç»ˆèº«ç¦é£";
                    els.mTitle.className = "text-2xl font-bold mb-4 pixel-font text-gray-500";
                    els.mImg.textContent = "ğŸ”’";
                    els.mDesc.textContent = "Frank é£å¾—å¤ªé¢‘ç¹ï¼Œèº«ä½“å½»åº•å®äº†ã€‚ä»–å†ä¹Ÿé£ä¸èµ·æ¥ï¼Œåªèƒ½æ°¸è¿œç•™åœ¨è¿™ä¸ªåœ°æ–¹ã€‚";
                    break;
                case 'hospital':
                    // Bad Ending 2: Overdose
                    els.mTitle.textContent = "é€åŒ»æ€¥æ•‘";
                    els.mTitle.className = "text-2xl font-bold mb-4 pixel-font text-white";
                    els.mImg.textContent = "ğŸš‘";
                    // ä¿®æ”¹ç»“å±€æè¿°
                    els.mDesc.textContent = "Frank Tingåƒè¯å¤ªå¤šï¼Œæ­»äº†";
                    break;
                case 'crime':
                    // Bad Ending 3: Wanted
                    els.mTitle.textContent = "è¢«é€šç¼‰";
                    els.mTitle.className = "text-2xl font-bold mb-4 pixel-font text-red-600";
                    els.mImg.textContent = "ğŸš“";
                    els.mDesc.innerHTML = "ç”±äºé•¿æ—¶é—´æœªæˆèµ·é£ï¼ŒFrank TIngæ‚£ä¸Šäº†æŠ‘éƒç—‡ï¼Œä»æ­¤èµ°å‘äº†çŠ¯ç½ªçš„é“è·¯ã€‚<br>æ‰€ä»¥è¯´ï¼Œé€‚å½“çš„èµ·é£è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„";
                    break;
                case 'crash':
                    // Bad Ending 4: Crash
                    els.mTitle.textContent = "å æœºæ‚²å‰§";
                    els.mTitle.className = "text-2xl font-bold mb-4 pixel-font text-orange-500";
                    els.mImg.textContent = "ğŸ’¥";
                    els.mDesc.textContent = "man, what can I say? Mamba out!";
                    break;
                case 'win':
                    // Good Ending
                    els.mTitle.textContent = "ç¯æ¸¸ä¸–ç•Œ!";
                    els.mTitle.className = "text-2xl font-bold mb-4 pixel-font text-green-400";
                    els.mImg.textContent = "ğŸŒ";
                    els.mDesc.textContent = "æ„¿æ‰€æœ‰æœºé•¿ç»ˆæˆæ­£æœ";
                    break;
            }
        }

        // Listeners
        els.btnFly.addEventListener('click', startFlying);
        els.btnRest.addEventListener('click', stopFlying);
        els.btnPill.addEventListener('click', takePill);

        // Start
        state.timer = setInterval(gameLoop, 100); // 10 ticks per second

    </script>
</body>
</html>
